


<!DOCTYPE html>
<html>
<head>
   <meta charset="utf-8">
   <title>Your Title Here</title>

   

<style>
html, body { margin: 0; padding: 0; }

body { font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; }

a:link, a:visited { color: black; }

h1 { font-size: 30pt;  }
h2 { font-size: 28pt;  }
h3 { font-size: 25pt;  }
p, li, dt, dd, td, th { font-size: 18pt; }

pre { font-size: 14pt;  }
pre.small { font-size: 11pt; }

pre.code {
        background-color: azure;
        padding: 5px;
      }

ul { list-style-type: square; }

.center { text-align: center; }

.slide { page-break-after: always;
         min-height: 100mm;
         padding: 40px;

         border: 1px dotted black;

/*
  background: -moz-linear-gradient( top, maroon, red);
*/
       }



/*
for princexml (CSS3 paged media support)
@page { size: A4 landscape }
*/
</style>

</head>
<body>

<article id="presentation">


<section class="slide " id="1">
  

<!-- _S9SLIDE_ -->
<h1 id="scripting-feliz">Scripting Feliz!</h1>

<p><img src="../language/images/iloveruby.png" alt="" /></p>



</section>

<section class="slide " id="2">
  <!-- _S9SLIDE_ -->
<h1 id="1-agradecimientos">1. Agradecimientos</h1>



</section>

<section class="slide " id="3">
  <!-- _S9SLIDE_ -->
<h1 id="2-presentación">2. Presentación</h1>

<ul>
  <li>David Vargas Ruiz</li>
  <li>Ingeniero Informático ULPGC</li>
  <li>Profesor FP Sistemas y Aplicaciones</li>
</ul>



</section>

<section class="slide " id="4">
  <!-- _S9SLIDE_ -->
<h1 id="3-agenda">3. Agenda</h1>

<ul>
  <li>El problema</li>
  <li>Ejemplos</li>
  <li>Definición de Scripting (personal)</li>
  <li>Propuesta</li>
</ul>



</section>

<section class="slide " id="5">
  <!-- _S9SLIDE_ -->
<h1 id="4-el-problema">4. El problema</h1>

<p>Situación:</p>
<ul>
  <li>Impartir el módulo de sistemas operativos en FP.</li>
  <li>Poco tiempo para enseñar scripting y varias alternativas por plataforma.</li>
</ul>

<p>Posibles soluciones:</p>
<ol>
  <li>Ganar más tiempo
    <ul>
      <li>GNU/Linux =&gt; Bash</li>
      <li>Windows =&gt; CMD, PowerShell</li>
    </ul>
  </li>
  <li>Cambiar a un lenguaje de scripting mutiplataforma.</li>
</ol>

<p>Mi definición de scripting:</p>
<ul>
  <li>Debe ser ágil y rápido de crear.</li>
  <li>Interpretado.</li>
</ul>

<pre><code>Scripting = comandos del sistema + "algo que los una de forma lógica"
</code></pre>



</section>

<section class="slide " id="6">
  <!-- _S9SLIDE_ -->
<h1 id="5-situación-ideal">5. Situación ideal</h1>



</section>

<section class="slide " id="7">
  <!-- _S9SLIDE_ -->
<h1 id="6-el-clásico-bash">6. El clásico Bash</h1>



</section>

<section class="slide " id="8">
  <!-- _S9SLIDE_ -->
<h1 id="7-definir-scripting">7. Definir scripting</h1>

<ul>
  <li>Los <strong>sysadmin/devops</strong> somos programadores… de scripts.</li>
  <li>Principal objetivo: Automatizar.</li>
</ul>

<p><strong>Scripting: características</strong></p>

<ul>
  <li>Lenguaje interpretado.</li>
  <li>Programa claro, sencillo y limpio.</li>
  <li>Documentar sólo si es necesario (no debería serlo)</li>
  <li>Cada fichero… un cometido (una misión u objetivo concreto)</li>
  <li>Sólo mostrar mensajes cuando hay problemas.</li>
  <li>Códigos de salida: <code>0 = OK</code>, <code>1 = Error</code></li>
  <li>Programas NO interactivos. Nuestro objetivo es automatizar.</li>
</ul>

<blockquote>
  <p>Lenguajes libres para hacer scripting multiplataforma Bash, Perl, Python… Ruby</p>
</blockquote>

<p>Vamos a seguir aprendiendo con ejemplos reales.
Viendo código desde los más sencillo y que iremos complicando
poco a poco.</p>



</section>

<section class="slide " id="9">
  <!-- _S9SLIDE_ -->
<h1 id="8-opensuse">8. OpenSUSE</h1>



</section>

<section class="slide " id="10">
  <!-- _S9SLIDE_ -->
<h1 id="9-propuesta">9. Propuesta</h1>

<p><strong>Enlaces de interés:</strong></p>
<ul>
  <li>Andrew Mallett (@theurbanpenguin): Ruby Scripting in Linux - See our mini-series of video tutorials!
    <ul>
      <li>http://ow.ly/BYIi30nifgZ</li>
      <li>https://www.theurbanpenguin.com/scripting-power-repetition/ruby-scripting-linux/</li>
    </ul>
  </li>
</ul>



</section>

<section class="slide " id="11">
  <!-- _S9SLIDE_ -->
<h1 id="10-instalación">10. Instalación</h1>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>ruby
</code></pre></div></div>



</section>

<section class="slide " id="12">
  <!-- _S9SLIDE_ -->
<h1 id="11-variables">11. Variables</h1>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">name</span> <span class="o">=</span> <span class="s2">"Obiwan"</span>
<span class="n">age</span> <span class="o">=</span> <span class="mi">42</span>
<span class="n">siths</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">"Darth Vader"</span><span class="p">,</span> <span class="s2">"Darth Sidious"</span><span class="p">,</span> <span class="s2">"Darth Maul"</span><span class="p">]</span>
</code></pre></div></div>



</section>

<section class="slide " id="13">
  <!-- _S9SLIDE_ -->
<h1 id="12-estructuras-básicas">12. Estructuras básicas</h1>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">age</span> <span class="o">&lt;</span> <span class="mi">18</span>
  <span class="nb">puts</span> <span class="s2">"Sorry! Too younger!"</span>
<span class="k">end</span>
</code></pre></div></div>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">jedis</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">"Obiwan"</span><span class="p">,</span> <span class="s2">"Yoda"</span><span class="p">,</span> <span class="s2">"Quigon-Jinn"</span><span class="p">]</span>

<span class="k">for</span> <span class="n">jedi</span> <span class="k">in</span> <span class="n">jedis</span>
  <span class="nb">puts</span> <span class="s2">"Hello </span><span class="si">#{</span><span class="n">jedi</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
</code></pre></div></div>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"May the fourth, be with you </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">!"</span>
<span class="k">end</span>
</code></pre></div></div>



</section>

<section class="slide " id="14">
  <!-- _S9SLIDE_ -->
<h1 id="13-ejecutar-comandos-del-sistema">13. Ejecutar comandos del sistema</h1>

<p>La instrucción <code>system</code> ejecuta un comando del sistema y devuelve <code>true/false</code>.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ok</span> <span class="o">=</span> <span class="nb">system</span><span class="p">(</span><span class="s2">"ping -c1 www.starwars.com"</span><span class="p">)</span>

<span class="k">unless</span> <span class="n">ok</span>
  <span class="nb">puts</span> <span class="s2">"Starwars ERROR!"</span>
<span class="k">end</span>
</code></pre></div></div>

<p>La instrucción <code>%x()</code> o “comillas inclinadas”, ejecuta un comando del sistema y devuelve su contenido.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">name</span> <span class="o">=</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'USER'</span><span class="p">]</span> <span class="c1"># Leer las variables de entorno</span>
<span class="n">place</span> <span class="o">=</span> <span class="sb">`pwd`</span>

<span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2"> is into </span><span class="si">#{</span><span class="n">place</span><span class="si">}</span><span class="s2">"</span>
</code></pre></div></div>



</section>

<section class="slide " id="15">
  <!-- _S9SLIDE_ -->
<h1 id="14-entrada-al-script">14. Entrada al script</h1>

<p>Paso de argumentos en el Array <code>ARGV</code>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">puts</span> <span class="s2">"Hello </span><span class="si">#{</span><span class="no">ARGV</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">!"</span>
<span class="nb">exit</span> <span class="mi">0</span>
</code></pre></div></div>

<p>Variables de entorno:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">name</span> <span class="o">=</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'user'</span><span class="p">]</span>

<span class="nb">puts</span> <span class="s2">"My name is </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">"</span>
<span class="nb">exit</span> <span class="mi">0</span>
</code></pre></div></div>

<p>De forma interactiva:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">print</span> <span class="s2">"¿Cómo te llamas? "</span>
<span class="nb">name</span> <span class="o">=</span> <span class="nb">gets</span>

<span class="nb">puts</span> <span class="s2">"Hola </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">!"</span>
<span class="nb">exit</span> <span class="mi">0</span>
</code></pre></div></div>



</section>

<section class="slide " id="16">
  <!-- _S9SLIDE_ -->
<h1 id="16-ejemplo-i-am-usernamesh">16 Ejemplo: i-am-username.sh</h1>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#/usr/bin/env bash</span>

<span class="c"># SI poner espacios es un problema de sintaxis: name = $(whoami)</span>
<span class="nv">name</span><span class="o">=</span><span class="si">$(</span><span class="nb">whoami</span><span class="si">)</span>         
<span class="nv">rol</span><span class="o">=</span><span class="nv">$1</span>

<span class="c"># NO poner espacios es un problema de sintáxis: if [$name == 'root']</span>
<span class="c"># NO poner espacios es un problema de semántica: if [ $name=='root' ]</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$name</span> <span class="o">==</span> <span class="s1">'root'</span> <span class="o">]</span>
<span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"root is not valid user!"</span>
  <span class="nb">exit </span>1
<span class="k">fi

</span><span class="nb">echo</span> <span class="s2">"[</span><span class="nv">$rol</span><span class="s2">] My name is </span><span class="nv">$name</span><span class="s2">"</span>
<span class="nb">exit </span>0
</code></pre></div></div>



</section>

<section class="slide " id="17">
  <!-- _S9SLIDE_ -->
<h1 id="17-ejemplo-i-am-usernamerb">17. Ejemplo: i-am-username.rb</h1>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#/usr/bin/env ruby</span>

<span class="nb">name</span> <span class="o">=</span> <span class="sx">%x(whoami)</span> <span class="c1"># name = `whoami`</span>
<span class="n">rol</span>  <span class="o">=</span> <span class="no">ARGV</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="s1">'unkown'</span>

<span class="k">if</span> <span class="nb">name</span> <span class="o">==</span> <span class="s1">'root'</span>
  <span class="nb">puts</span> <span class="s2">"root is not valid user!"</span>
  <span class="nb">exit</span> <span class="mi">1</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="s2">"[</span><span class="si">#{</span><span class="n">rol</span><span class="si">}</span><span class="s2">] My name is </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">"</span>
<span class="nb">exit</span> <span class="mi">0</span>
</code></pre></div></div>



</section>

<section class="slide " id="18">
  <!-- _S9SLIDE_ -->
<h1 id="18-mis-conclusiones">18. Mis conclusiones</h1>

<table>
  <thead>
    <tr>
      <th>Característica</th>
      <th>Bash</th>
      <th>Ruby</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Multiplataforma</td>
      <td>No</td>
      <td>Sí</td>
    </tr>
    <tr>
      <td>Condicionales</td>
      <td>:-(</td>
      <td>sencilla</td>
    </tr>
    <tr>
      <td>Iteradores</td>
      <td>:-(</td>
      <td>sencilla</td>
    </tr>
    <tr>
      <td>Funciones</td>
      <td>:-(</td>
      <td>sencilla</td>
    </tr>
    <tr>
      <td>Reutilización</td>
      <td>:-(</td>
      <td>sencilla</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>Ruby es ideal para el aprendizaje.</li>
  <li>Transformación directa desde el pseudocódigo.</li>
  <li>Se escribe casi como en inglés natural.</li>
</ul>



</section>

<section class="slide " id="19">
  <!-- _S9SLIDE_ -->
<h1 id="19-muchas-gracias">19. Muchas gracias!</h1>


</section>


</article> <!-- presentation -->
</body>
</html>
